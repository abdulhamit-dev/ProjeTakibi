
<div class="grid">
    <div class="col-12 md:col-2">
        <p-listbox [options]="projeList" [(ngModel)]="selectProje" optionLabel="ad" (click)="ProjeGorevList(selectProje)"></p-listbox>
    </div>
    <div class="col-12 md:col-10">
        <div class="grid">
            <div class="col-12 md:col-12">
                 <p-table [value]="gorevList" [resizableColumns]="true" [autoLayout]="true"  >
                    <ng-template pTemplate="header">
                        <tr>
                            <th hidden >ID</th>
                            <th hidden>Proje Id</th>
                            <th></th>
                            <th>Görevler</th>
                            <th>Oluşturulma Tarihi</th>
                            <th></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-gorev>
                        <tr >
                            <td hidden>{{gorev.id}}</td>
                            <td hidden>{{gorev.projeId}}</td>
                            <td style="width: 20px;"><p-checkbox [(ngModel)]="gorev.yapilmaDurumu" [binary]="true" inputId="binary" (onChange)="GorevDurumuDegistir(gorev)" ></p-checkbox></td>
                            <td  >
                              <!-- {{gorev.yapilacakIsAciklama}} -->
                              <input [ngStyle]="
                              {
                                'text-decoration':gorev.yapilmaDurumu===true ? 'line-through':'none',
                                'background-color':gorev.yapilmaDurumu===true ? '#1e1e1e':'',
                                'color':gorev.yapilmaDurumu===true ? 'green':'',
                                'width':gorev.yapilacakIsAciklama.length*10+'px'
                              }
                              "

                              pInputText style="cursor: pointer;" #input value="{{gorev.yapilacakIsAciklama}}" (focusout)="GorevAciklamaDuzenle(gorev,input.value)">
                              </td>
                            <td>{{gorev.islemTarihi.toDate() | date:'dd.MM.yyyy HH:mm'}}</td>
                            <td><p-button icon="pi pi-trash" (click)="GorevSil(gorev)" label=""  styleClass="p-button-danger p-button-sm"></p-button></td>
                        </tr>
                    </ng-template>

                </p-table>
            </div>
            <div class="col-12 md:col-12">
                <input *ngIf="selectProje.id!=null" pInputText placeholder="Yeni görev yaz.. Enter ile kaydet"
                style="width: 100%;" (keyup.enter)="GorevEkle()" [(ngModel)]="gorev.yapilacakIsAciklama" >
            </div>
        </div>

    </div>
</div>
